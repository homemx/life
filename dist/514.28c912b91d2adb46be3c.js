"use strict";(self.webpackChunktemplate_react_base=self.webpackChunktemplate_react_base||[]).push([[514],{855:function(e,r,t){t.r(r),t.d(r,{default:function(){return i}});var n=t(328),o=(t(327),t(27),t(104),t(108),t(138),t(141),t(846),t(834),t(14)),u=t(165),a=t(144),c=t(856);function i(){return o.createElement(a.rs,null,o.createElement(a.AQ,{path:"/user",exact:!0,module:function(){return t.e(937).then(t.bind(t,893))}}),o.createElement(a.AQ,{path:"/user/:id",permission:function(){var e=(0,n.Z)(regeneratorRuntime.mark((function e(r){var t,n,a,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=r.computedMatch,n=null==t?void 0:t.params,"100"!==(a=n.id)){e.next=7;break}return e.next=5,(0,c.P)("globalLoading");case 5:return i=e.sent,e.abrupt("return",o.createElement(u.l_,{to:{pathname:"/about",search:"?id=".concat(a,"&name=").concat(i.name)}}));case 7:return e.abrupt("return",!0);case 8:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}(),module:function(){return t.e(108).then(t.bind(t,894))}}))}},856:function(e,r,t){t.d(r,{P:function(){return k}});var n=t(200),o=t(328),u=(t(327),t(146),t(157),t(159),t(163),t(215)),a=t(164),c=t(221),i=t(222),l=(t(104),t(108),t(846),t(825),t(160),t(145),t(857)),s=t.n(l),f=t(193);function m(e){return"function"==typeof e}function p(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function d(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?p(Object(t),!0).forEach((function(r){(0,a.Z)(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):p(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}var v=1,g=2,h=3,b=function(){function e(){(0,c.Z)(this,e)}return(0,i.Z)(e,null,[{key:"create",value:function(e){var r={},t=s().create(d({withCredentials:!0,loadingTime:1500,shouldBlock:function(e){var r,t=null==e||null===(r=e.response)||void 0===r?void 0:r.status;return 429===t||503===t},block:function(e){return!0},blockTime:6e5,shouldRetry:function(e){var r;return(null==e||null===(r=e.response)||void 0===r?void 0:r.status)>=500}},e)),n=t.request.bind(t),o=!1,a=null,c=function(e,r){if(m(r.failover)){var n=r.failover(e,r);if("object"===(0,u.Z)(n))return t.request(d(d({},n),{},{failover:!1}))}return m(r.shouldBlock)&&(o=r.shouldBlock(e),a=e,setTimeout((function(){o=!1,a=null}),r.blockTime)),r.retry>0&&r._retry<Math.min(r.retry,2)&&r.shouldRetry(e)?(r._retry+=1,t.request(r)):(m(r.error)&&r.error(e,r),Promise.reject(e))},i=function(e){var r=e.key,t=e.params,n=e.url;if(r)return r;var o=f.stringify(t);return"".concat(n).concat(null!=o?o:"?".concat(o))},l=function(e){if(r[e]){var t=r[e].timer;t&&clearTimeout(t)}};t.request=function(e){var t=i(e),o=r[t];if(o){if(o.status===v)return Promise.resolve({});if("get"===e.method){if(e.force)return n(e);if(r[t].response)return Promise.resolve(r[t].response)}}return n(e)};["delete","get","head","options"].forEach((function(e){t[e]=function(r,n){return t.request(d(d({},n),{},{method:e,url:r,data:(n||{}).data}))}}));return["post","put","patch"].forEach((function(e){t[e]=function(r,n,o){return t.request(d(d({},o),{},{method:e,url:r,data:n}))}})),t.interceptors.request.use((function(e){var t,n=e.loading,u=e.loadingTime;if(o&&e.block(e))return Promise.reject(a);var c=i(e);return e.key=c,e._retry=null!==(t=e._retry)&&void 0!==t?t:0,r[c]=Object.assign(r[c]||{},{status:v,timer:setTimeout((function(){m(n)&&n(e)}),u)}),e}),(function(e){return c(e,e.config)})),t.interceptors.response.use((function(t){var n=t.config,o=n.ttl,u=n.method,a=n.key;return l(a),r[a].status=g,"get"===u.toLocaleLowerCase()&&o>0?(r[a].response=t,r[a].clearCacheTimer&&clearTimeout(r[a].clearCacheTimer),r[a].clearCacheTimer=setTimeout((function(){delete r[a]}),o)):delete r[a],m(e.complete)&&e.complete(n),t}),(function(t){var n=t.config.key;return n&&(l(n),r[n]&&(r[n].status=h,delete r[n])),m(e.complete)&&e.complete(t.config),c(t,t.config)})),t.clear=function(e){if(e){var t=r[e];t&&t.status!==v&&delete r[e]}else Object.keys(r).forEach((function(e){var t=r[e];t&&t.status!==v&&delete r[e]}))},t}}]),e}().create({baseURL:"//mock.gem-mine.tech/mock/272",loading:function(){console.log("global  loading...")},failover:function(e,r){if("/user/200"===r.url)return r.baseURL="//mock.gem-mine.tech/mock/272",r},error:function(e){var r,t,n,o,u=null!==(r=null!==(t=null==e||null===(n=e.response)||void 0===n||null===(o=n.data)||void 0===o?void 0:o.message)&&void 0!==t?t:null==e?void 0:e.message)&&void 0!==r?r:"未知异常";console.log("global error",u)}}),y={normal:function(){return[1,{}]},globalLoading:function(){return[2,{params:{_delay:2500}}]},customLoading:function(){return[3,{params:{_delay:2500},loading:function(){console.log("custom loading...")}}]},globalError:function(){return[4,{params:{_error:!0}}]},customError:function(){return[5,{params:{_error:!0},error:function(e){console.log("custom error",e)}}]},retry:function(){return[5,{params:{_delay:2e3,_error:!0},retry:2}]},cache:function(){return[6,{key:"xxx",params:{_delay:2e3},ttl:15e3}]},force:function(){return[7,{key:"xxx",force:!0,ttl:15e3}]},block:function(){return[8,{params:{_delay:2e3,_error:!0,_status:503}}]},failover:function(){return[200,{_error:!0}]}};function k(e){return _.apply(this,arguments)}function _(){return(_=(0,o.Z)(regeneratorRuntime.mark((function e(r){var t,o,u,a,c,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=y[r](),o=(0,n.Z)(t,2),u=o[0],a=o[1],e.next=3,b.get("/user/".concat(u),a);case 3:return c=e.sent,i=c.data,e.abrupt("return",i);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}}}]);
//# sourceMappingURL=514.28c912b91d2adb46be3c.js.map